{"is_source_file": true, "format": "Python", "description": "This script initializes an SQLite database for the thought_database project. It creates essential tables ('thoughts', 'app_info', 'users'), seeds configuration data, writes connection and environment info for external tools, and verifies the database schema's integrity. The script ensures idempotency and provides guidance on accessing the database.", "external_files": ["os", "sqlite3", "typing"], "external_methods": ["os.path.exists", "os.makedirs", "print", "open", "sqlite3.connect", "cursor.execute", "cursor.fetchone"], "published": ["main"], "classes": [], "methods": [{"name": "Tuple[sqlite3.Connection,sqlite3.Cursor] _ensure_conn()", "description": "Creates and returns a SQLite database connection and cursor with foreign keys enabled.", "scope": "", "scopeKind": ""}, {"name": "None _init_core_tables(cursor: sqlite3.Cursor)", "description": "Creates core tables ('thoughts', 'app_info', 'users') if they do not exist, ensuring idempotency.", "scope": "", "scopeKind": ""}, {"name": "None _seed_app_info(cursor: sqlite3.Cursor)", "description": "Seeds minimal application metadata into the 'app_info' table.", "scope": "", "scopeKind": ""}, {"name": "None _write_connection_info(db_abs_path: str)", "description": "Writes the database absolute path and connection string to 'db_connection.txt' for external use.", "scope": "", "scopeKind": ""}, {"name": "None _write_visualizer_env(db_abs_path: str)", "description": "Creates environment variable file for database visualization tools.", "scope": "", "scopeKind": ""}, {"name": "bool _verify_thoughts_table(cursor: sqlite3.Cursor)", "description": "Checks whether the 'thoughts' table exists in the database.", "scope": "", "scopeKind": ""}, {"name": "None main()", "description": "Main entry point that orchestrates database initialization, verification, and outputs usage instructions.", "scope": "", "scopeKind": ""}], "calls": ["sqlite3.connect", "cursor.execute", "cursor.fetchone", "os.path.exists", "os.makedirs", "open", "print", "subprocess.run"], "search-terms": ["init_db", "thoughts table", "database connection info", "sqlite setup", "idempotent database initialization", "seeding app info", "database verification", "db_visualizer", "SQLite script"], "state": 2, "file_id": 8, "knowledge_revision": 20, "git_revision": "f50fdb58b5b5cee4e846c4e55433d1ff49122ac2", "revision_history": [{"17": "c34ba1858b264db2939def48137005da30401dd3"}, {"20": "f50fdb58b5b5cee4e846c4e55433d1ff49122ac2"}], "ctags": [{"_type": "tag", "name": "DB_NAME", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^DB_NAME = \"myapp.db\"  # SQLite database file name$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ensure_conn", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _ensure_conn() -> Tuple[sqlite3.Connection, sqlite3.Cursor]:$/", "language": "Python", "typeref": "typename:Tuple[sqlite3.Connection,sqlite3.Cursor]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_init_core_tables", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _init_core_tables(cursor: sqlite3.Cursor) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(cursor: sqlite3.Cursor)"}, {"_type": "tag", "name": "_seed_app_info", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _seed_app_info(cursor: sqlite3.Cursor) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(cursor: sqlite3.Cursor)"}, {"_type": "tag", "name": "_verify_thoughts_table", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _verify_thoughts_table(cursor: sqlite3.Cursor) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(cursor: sqlite3.Cursor)"}, {"_type": "tag", "name": "_write_connection_info", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _write_connection_info(db_abs_path: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(db_abs_path: str)"}, {"_type": "tag", "name": "_write_visualizer_env", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _write_visualizer_env(db_abs_path: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(db_abs_path: str)"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def main() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "6a9ef3f85ec333ea833ff324331af3e3", "format-version": 4, "code-base-name": "thought_database", "filename": "thought_database/init_db.py", "fields": [{"name": "DB_NAME = \"myapp.db\"  # SQLite database file name", "scope": "", "scopeKind": "", "description": "unavailable"}]}