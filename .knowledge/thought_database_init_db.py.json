{"is_source_file": true, "format": "Python", "description": "This script initializes an SQLite database for the thought_database project, creating required tables ('thoughts', 'app_info', 'users') if they do not exist, seeding initial info, and writing connection/configuration files. It manages schema setup, verification, and provides instructions for connecting to the database.", "external_files": ["os", "sqlite3", "typing"], "external_methods": ["os.path.exists", "os.makedirs", "open", "print", "sqlite3.connect", "cursor.execute", "cursor.fetchone", "os.path.abspath"], "published": ["main", "_ensure_conn", "_init_core_tables", "_seed_app_info", "_write_connection_info", "_write_visualizer_env", "_verify_thoughts_table"], "classes": [], "methods": [{"name": "Tuple[sqlite3.Connection,sqlite3.Cursor] _ensure_conn()", "description": "Creates and returns a database connection and cursor with foreign key pragma enabled.", "scope": "", "scopeKind": ""}, {"name": "None _init_core_tables(cursor: sqlite3.Cursor)", "description": "Creates core tables ('thoughts', 'app_info', 'users') and indexes if they do not exist.", "scope": "", "scopeKind": ""}, {"name": "None _seed_app_info(cursor: sqlite3.Cursor)", "description": "Seeds initial app info key-value pairs into 'app_info' table.", "scope": "", "scopeKind": ""}, {"name": "None _write_connection_info(db_abs_path: str)", "description": "Writes database absolute path and connection string to 'db_connection.txt'.", "scope": "", "scopeKind": ""}, {"name": "None _write_visualizer_env(db_abs_path: str)", "description": "Creates directory and writes environment variable for database path for visualizer tool.", "scope": "", "scopeKind": ""}, {"name": "bool _verify_thoughts_table(cursor: sqlite3.Cursor)", "description": "Checks whether the 'thoughts' table exists in the database.", "scope": "", "scopeKind": ""}, {"name": "None main()", "description": "Main entry point to initialize the database idempotently, including setup, verification, and output of connection info and stats.", "scope": "", "scopeKind": ""}], "calls": ["sqlite3.connect", "cursor.execute", "cursor.fetchone", "os.path.exists", "os.makedirs", "open", "print", "subprocess.run"], "search-terms": ["init_db", "thoughts table", "database setup", "SQLite initialization", "schema creation", "seed app info", "visualizer env", "database connection"], "state": 2, "file_id": 8, "knowledge_revision": 21, "git_revision": "f50fdb58b5b5cee4e846c4e55433d1ff49122ac2", "revision_history": [{"17": "c34ba1858b264db2939def48137005da30401dd3"}, {"20": "f50fdb58b5b5cee4e846c4e55433d1ff49122ac2"}, {"21": "f50fdb58b5b5cee4e846c4e55433d1ff49122ac2"}], "ctags": [{"_type": "tag", "name": "DB_NAME", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^DB_NAME = \"myapp.db\"  # SQLite database file name$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ensure_conn", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _ensure_conn() -> Tuple[sqlite3.Connection, sqlite3.Cursor]:$/", "language": "Python", "typeref": "typename:Tuple[sqlite3.Connection,sqlite3.Cursor]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_init_core_tables", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _init_core_tables(cursor: sqlite3.Cursor) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(cursor: sqlite3.Cursor)"}, {"_type": "tag", "name": "_seed_app_info", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _seed_app_info(cursor: sqlite3.Cursor) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(cursor: sqlite3.Cursor)"}, {"_type": "tag", "name": "_verify_thoughts_table", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _verify_thoughts_table(cursor: sqlite3.Cursor) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(cursor: sqlite3.Cursor)"}, {"_type": "tag", "name": "_write_connection_info", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _write_connection_info(db_abs_path: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(db_abs_path: str)"}, {"_type": "tag", "name": "_write_visualizer_env", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _write_visualizer_env(db_abs_path: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(db_abs_path: str)"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def main() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "110822b86883576f51b1323d2dfc01fb", "format-version": 4, "code-base-name": "thought_database", "filename": "thought_database/init_db.py", "fields": [{"name": "DB_NAME = \"myapp.db\"  # SQLite database file name", "scope": "", "scopeKind": "", "description": "unavailable"}]}