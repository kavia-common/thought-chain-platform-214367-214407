{"is_source_file": true, "format": "Python", "description": "This script initializes an SQLite database for the thought_database project, creating necessary tables, indexes, seeding metadata, and writing configuration files for backend and visualization purposes.", "external_files": ["db_connection.txt", "db_visualizer/sqlite.env"], "external_methods": ["os.path.exists", "os.makedirs", "sqlite3.connect", "print", "open", "os.path.abspath"], "published": ["main"], "classes": [], "methods": [{"name": "Tuple[sqlite3.Connection,sqlite3.Cursor] _ensure_conn()", "description": "Creates and returns a SQLite connection and cursor with foreign key support enabled.", "scope": "", "scopeKind": ""}, {"name": "None _init_core_tables(cursor: sqlite3.Cursor)", "description": "Creates the 'thoughts', 'app_info', and 'users' tables if they do not exist, including indexes for performance.", "scope": "", "scopeKind": ""}, {"name": "None _seed_app_info(cursor: sqlite3.Cursor)", "description": "Seeds basic application metadata into the 'app_info' table in an idempotent way.", "scope": "", "scopeKind": ""}, {"name": "None _write_connection_info(db_abs_path: str)", "description": "Writes the absolute database path and connection string to 'db_connection.txt'.", "scope": "", "scopeKind": ""}, {"name": "None _write_visualizer_env(db_abs_path: str)", "description": "Creates a directory and writes environment variables for the local database visualizer.", "scope": "", "scopeKind": ""}, {"name": "bool _verify_thoughts_table(cursor: sqlite3.Cursor)", "description": "Checks the existence of the 'thoughts' table in the database.", "scope": "", "scopeKind": ""}, {"name": "None main()", "description": "Main entry point for initializing the database, creating tables, indexes, seeding data, verifying schema, and outputting connection info.", "scope": "", "scopeKind": ""}], "calls": ["sqlite3.connect", "cursor.execute", "cursor.fetchone", "os.path.exists", "open", "os.makedirs", "print", "subprocess.run"], "search-terms": ["init_db", "thoughts table", "sqlite connection setup", "database initialization", "seed app info", "create tables if not exists", "indexes on thoughts", "connection string file", "visualizer env"], "state": 2, "file_id": 8, "knowledge_revision": 22, "git_revision": "5547b6eaaded78ea35c9be4b59b392d040b206cd", "revision_history": [{"17": "c34ba1858b264db2939def48137005da30401dd3"}, {"20": "f50fdb58b5b5cee4e846c4e55433d1ff49122ac2"}, {"21": "f50fdb58b5b5cee4e846c4e55433d1ff49122ac2"}, {"22": "5547b6eaaded78ea35c9be4b59b392d040b206cd"}], "ctags": [{"_type": "tag", "name": "DB_NAME", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^DB_NAME = \"myapp.db\"  # SQLite database file name$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ensure_conn", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _ensure_conn() -> Tuple[sqlite3.Connection, sqlite3.Cursor]:$/", "language": "Python", "typeref": "typename:Tuple[sqlite3.Connection,sqlite3.Cursor]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_init_core_tables", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _init_core_tables(cursor: sqlite3.Cursor) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(cursor: sqlite3.Cursor)"}, {"_type": "tag", "name": "_seed_app_info", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _seed_app_info(cursor: sqlite3.Cursor) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(cursor: sqlite3.Cursor)"}, {"_type": "tag", "name": "_verify_thoughts_table", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _verify_thoughts_table(cursor: sqlite3.Cursor) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(cursor: sqlite3.Cursor)"}, {"_type": "tag", "name": "_write_connection_info", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _write_connection_info(db_abs_path: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(db_abs_path: str)"}, {"_type": "tag", "name": "_write_visualizer_env", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def _write_visualizer_env(db_abs_path: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(db_abs_path: str)"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/thought-chain-platform-214367-214407/thought_database/init_db.py", "pattern": "/^def main() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "110822b86883576f51b1323d2dfc01fb", "format-version": 4, "code-base-name": "thought_database", "filename": "thought_database/init_db.py", "fields": [{"name": "DB_NAME = \"myapp.db\"  # SQLite database file name", "scope": "", "scopeKind": "", "description": "unavailable"}]}